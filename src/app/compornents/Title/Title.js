"use client";
import React, { useEffect, useState } from 'react'
import styles from './Title.module.css'

const Title = (props) => {
    // svgデータ
    const svgData = [
        {
            d: "m31.65,35.85h-4.29V8.05l-8.41,18.92h-2.6L8.01,8.05v27.8h-4.01V3.58h5.85l8.06,17.96L25.69,3.58h5.96v32.26Z",
            label: "m",
        },
        {
            d: "m46.46,8.25h-4.1V3.83h4.1v4.42Zm0,27.34h-4.1V12.61h4.1v22.99Z",
            label: "i",
        },
        {
            d: "m61.02,15.53c2.04-2.3,4.33-3.45,6.87-3.45,5.19,0,7.78,2.82,7.78,8.47v15.04h-4.1v-14.86c0-1.88-.34-3.23-1.01-4.05s-1.77-1.24-3.3-1.24c-2.08,0-4.16,1.23-6.24,3.68v16.47h-4.1V12.61h4.1v2.93Z",
            label: "n",
        },
        {
            d: "m95.36,12.09c3.28,0,5.9,1.05,7.85,3.14,1.96,2.09,2.94,5.06,2.94,8.88s-.98,6.77-2.94,8.87c-1.96,2.1-4.58,3.15-7.85,3.15s-5.88-1.05-7.83-3.15-2.94-5.06-2.94-8.87.98-6.79,2.94-8.88,4.57-3.14,7.83-3.14Zm0,20.84c1.95,0,3.53-.74,4.75-2.22s1.82-3.68,1.82-6.6-.61-5.14-1.82-6.62-2.8-2.22-4.75-2.22-3.53.74-4.75,2.22-1.82,3.69-1.82,6.62.61,5.12,1.82,6.6,2.8,2.22,4.75,2.22Z",
            label: "o",
        },
        {
            d: "m127.1,16.34c-.58-.17-1.41-.26-2.49-.26-2.08,0-3.86,1.09-5.35,3.27v16.25h-4.1V12.61h4.1v3.21c1.72-2.48,3.71-3.73,5.98-3.73.58,0,1.2.06,1.86.17v4.07Z",
            label: "r",
        },
        {
            d: "m138.47,8.25h-4.1V3.83h4.1v4.42Zm0,27.34h-4.1V12.61h4.1v22.99Z",
            label: "i-2",
        },
        {
            d: "m153.89,3.66l-3.03,9.66h-2.56l2.41-9.66h3.19Z",
            label: "_-2",
        },
        {
            d: "m168.81,36.14c-6.28,0-9.57-2.47-9.86-7.41h4.1c.03,2.8,1.94,4.2,5.72,4.2,1.69,0,2.98-.35,3.87-1.05s1.33-1.58,1.33-2.63-.43-1.77-1.3-2.2-2.65-.98-5.36-1.66-4.69-1.44-5.94-2.28-1.87-2.31-1.87-4.42c0-1.91.78-3.48,2.33-4.73s3.63-1.87,6.23-1.87c6.02,0,9.1,2.15,9.23,6.44h-4.07c-.14-2.17-1.77-3.25-4.88-3.25-1.37,0-2.51.26-3.41.78s-1.35,1.28-1.35,2.28c0,.9.35,1.54,1.04,1.94s2.43.93,5.21,1.6,4.85,1.46,6.2,2.35,2.03,2.44,2.03,4.64-.83,3.83-2.5,5.21-3.91,2.07-6.73,2.07Z",
            label: "s",
        },
        {
            d: "m215.96,37.2h-24.65v-1.37h24.65v1.37Z",
            label: "_-3",
        },
        {
            d: "m235.81,27.76v11.74h-3.64V8.43h8.54c3.32,0,5.9.81,7.72,2.43s2.74,3.9,2.74,6.85-1.01,5.36-3.04,7.24-4.77,2.82-8.22,2.82h-4.1Zm0-16.03v12.74h3.81c2.51,0,4.43-.57,5.75-1.72s1.98-2.77,1.98-4.86c0-4.1-2.43-6.15-7.28-6.15h-4.27Z",
            label: "p",
        },
        {
            d: "m268.3,16.34c3.28,0,5.9,1.05,7.85,3.14s2.94,5.06,2.94,8.88-.98,6.77-2.94,8.87-4.58,3.15-7.85,3.15-5.88-1.05-7.83-3.15-2.94-5.06-2.94-8.87.98-6.79,2.94-8.88,4.57-3.14,7.83-3.14Zm0,20.84c1.95,0,3.53-.74,4.75-2.22s1.82-3.68,1.82-6.6-.61-5.14-1.82-6.62-2.8-2.22-4.75-2.22-3.53.74-4.75,2.22-1.82,3.69-1.82,6.62.61,5.12,1.82,6.6,2.8,2.22,4.75,2.22Z",
            label: "o-2",
        },
        {
            d: "m301.63,20.59c-.58-.17-1.41-.26-2.49-.26-2.08,0-3.86,1.09-5.35,3.27v16.25h-4.1v-22.99h4.1v3.21c1.72-2.48,3.71-3.73,5.98-3.73.58,0,1.2.06,1.86.17v4.07Z",
            label: "r-2",
        },
        {
            d: "m322.54,39.89c-.9.17-1.87.26-2.93.26-1.68,0-2.9-.3-3.68-.9s-1.26-1.37-1.45-2.31-.28-2.22-.28-3.84v-13.04h-2.84v-3.21h2.84v-5.72h4.07v5.72h3.73v3.21h-3.73v13.26c0,1.57.2,2.57.6,3s.94.64,1.64.64,1.39-.06,2.04-.17v3.1Z",
            label: "t",
        },
        {
            d: "m338.85,20.07v19.78h-4.07v-19.78h-3.38v-3.21h3.38v-2.04c0-4.85,2.15-7.28,6.44-7.28,1.31,0,2.33.09,3.06.26v3.55c-.81-.14-1.63-.22-2.47-.22-1,0-1.74.28-2.22.83s-.73,1.52-.73,2.89v1.99h4.36v3.21h-4.36Z",
            label: "f",
        },
        {
            d: "m361.74,16.34c3.28,0,5.9,1.05,7.85,3.14s2.94,5.06,2.94,8.88-.98,6.77-2.94,8.87-4.58,3.15-7.85,3.15-5.88-1.05-7.83-3.15-2.94-5.06-2.94-8.87.98-6.79,2.94-8.88,4.57-3.14,7.83-3.14Zm0,20.84c1.95,0,3.53-.74,4.75-2.22s1.82-3.68,1.82-6.6-.61-5.14-1.82-6.62-2.8-2.22-4.75-2.22-3.53.74-4.75,2.22-1.82,3.69-1.82,6.62.61,5.12,1.82,6.6,2.8,2.22,4.75,2.22Z",
            label: "o-3",
        },
        {
            d: "m386.66,39.85h-4.1V8.08h4.1v31.76Z",
            label: "l",
        },
        {
            d: "m402.81,12.5h-4.1v-4.42h4.1v4.42Zm0,27.34h-4.1v-22.99h4.1v22.99Z",
            label: "i-3",
        },
        {
            d: "m423.21,16.34c3.28,0,5.9,1.05,7.86,3.14s2.93,5.06,2.93,8.88-.98,6.77-2.93,8.87-4.58,3.15-7.86,3.15-5.87-1.05-7.83-3.15-2.94-5.06-2.94-8.87.98-6.79,2.94-8.88,4.57-3.14,7.83-3.14Zm0,20.84c1.95,0,3.53-.74,4.75-2.22s1.82-3.68,1.82-6.6-.61-5.14-1.82-6.62-2.8-2.22-4.75-2.22-3.53.74-4.75,2.22-1.82,3.69-1.82,6.62.61,5.12,1.82,6.6,2.8,2.22,4.75,2.22Z",
            label: "o-4",
        }
    ];

    // svgの準備
    const [fillPaths, setFillPaths] = useState([]);
    const [strPaths, setStrPaths] = useState([]);
    // textの準備
    const introductionData = props.intro;
    const welcomeMessageData = props.message;
    const [introductionText, setIntroductionText] = useState([]);
    const [welcomeMessageText, setWelcomeMessageText] = useState([]);
    let introduction = introductionData.split('');
    let welcomeMessage = welcomeMessageData.split('');


    useEffect(() => {
        // svgの処理
        svgData.forEach((item, index) => {
            setTimeout(() => {
                setFillPaths(prevPathes => [
                    ...prevPathes,
                    (
                        <path 
                            key={item.label}
                            id={item.label}
                            d={item.d}
                            className={styles.fill}
                        />
                    )
                ]);

                setStrPaths(prevPathes => [
                    ...prevPathes,
                    (
                        <path 
                            key={item.label}
                            id={item.label}
                            d={item.d}
                            className={styles.str}
                        />
                    )
                ]);
            }, index * 100);
        });

        // textの処理
        introduction.forEach((item, index) => {
            setTimeout(() => {
                setIntroductionText(prevTexts => [
                    ...prevTexts,item
                ]);
            }, index * 50)
        })

        async function typeingDelay() {
        // 遅延時間
            const delay = introduction.length * 50;
            // 遅延を待つ
            await new Promise(resolve => setTimeout(resolve, delay));
            // 遅延後
            welcomeMessage.forEach((item, index) => {
                setTimeout(() => {
                    setWelcomeMessageText(prevTexts => [
                        ...prevTexts,item
                    ]);
                }, index * 50);
            });
        }
        typeingDelay();
    }, [])


    return (
        <div className={styles.logoCover}>
            <svg id="logoFill" className={styles.logoFill} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 437 47">
                {fillPaths}
            </svg>
            <svg id="logoStr" className={styles.logoStr} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 437 47">
                {strPaths}
            </svg>
            <p className={styles.text}>
                {introductionText}
            </p>
            <p className={styles.text}>
                {welcomeMessageText}
            </p>
        </div>
    )
};

export default Title